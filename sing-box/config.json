{
  "route":{
    // "final":"direct",
    // "final":"proxy",
    "default_domain_resolver":"local",
    // "auto_detect_interface":true,
    "rules":[
      {"inbound":"tun","port":53,"ip_cidr":["fd00::1/126","172.19.0.1/30"],"action":"hijack-dns"},
      {"ip_is_private":true,"outbound":"direct"},
      {"rule_set":"rule-process","outbound":"direct"},
      {"clash_mode":"Direct","outbound":"direct"},
      {"clash_mode":"Global","outbound":"proxy"},
      {"type":"logical","mode":"and","rules":[{"type":"logical","mode":"or","rules":[{"clash_mode":"gfw"},{"clash_mode":"blacklist"}]},{"rule_set":"geoip-telegram","invert":true}],"sniffer":["dns","stun","http","tls","quic"],"timeout":"30ms","action":"sniff"},
      {"type":"logical","mode":"and","rules":[{"type":"logical","mode":"and","rules":[{"clash_mode":"gfw","invert":true},{"clash_mode":"blacklist","invert":true}]},{"rule_set":"geoip-telegram","invert":true},{"port":[80,443,853,8080,8443],"inbound":"tun"}],"sniffer":["http","tls","quic"],"timeout":"30ms","action":"sniff"},
      {"port":53,"action":"hijack-dns"},
      {"protocol":"dns","action":"hijack-dns"},
      {"rule_set":"rule-geph-broker","outbound":"direct"},
      {"rule_set":"geosite-private","outbound":"direct"},
      {"type":"logical","mode":"or","rules":[{"type":"logical","mode":"or","rules":[{"clash_mode":"gfw","invert":true},{"clash_mode":"blacklist","invert":true}]},{"port":853},{"network":"udp","port":443},{"protocol":"quic"},{"protocol":"stun"}],"action":"reject"},
      {"rule_set":["geosite-ad-MeepoMaster","geosite-ad-cat","geosite-category-httpdns-cn","geosite-category-ads-all","rule-custom-block"],"action":"reject"},
      {"rule_set":"geosite-googlefcm","outbound":"googlefcm"},
      {"rule_set":"geosite-onedrive","outbound":"onedrive"},

      // {"domain":["dns.cloudflare.com","dns.cloudflare-dns.com"],"override_address":"104.16.249.249","action":"route-options"},
      // {"domain":["dns.cloudflare.com","dns.cloudflare-dns.com","dns.google"],"tls_fragment":true,"tls_fragment_fallback_delay":"500ms","action":"route-options"},
      // {"domain":["dns.cloudflare.com","dns.cloudflare-dns.com","dns.google"],"tls_record_fragment":true,"action":"route-options"},

      {"type":"logical","mode":"or","rules":[{"clash_mode":"gfw","rule_set":"geosite-gfw"},{"clash_mode":"blacklist","rule_set":"geosite-geolocation-!cn"}],"outbound":"proxy"},
      {"type":"logical","mode":"or","rules":[{"clash_mode":"gfw"},{"clash_mode":"blacklist"}],"outbound":"direct"},

      {"rule_set":["geosite-category-games@cn","geosite-steam@cn","geosite-microsoft@cn","geosite-apple@cn","geosite-apple-cn"],"outbound":"direct"},
      {"rule_set":"geosite-cn","outbound":"direct"},
      {"action":"resolve"},
      {"type":"logical","mode":"and","rules":[{"rule_set":"geoip-cn"},{"rule_set":"geosite-geolocation-!cn","invert":true}],"outbound":"direct"},

      {"domain":"end.end","action":"reject"}
    ],
    "rule_set":[
      {"tag":"rule-geph-broker","rules":[{"domain":["vuejs.org","www.cdn77.com"]}]},
      {"tag":"rule-process","rules":[{"process_name":["tailscaled","tailscaled.exe","mihomo","mihomo.exe","geph4-client","geph4-client.exe","gephgui-wry","gephgui-wry.exe","geph5-client-gui","geph5-client-gui.exe","geph5-client","geph5-client.exe"]}]},
      {"tag":"geosite-private","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-private.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-ad-cat","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules-singbox.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-ad-MeepoMaster","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/MeepoMaster/sing-box-ruleset/main/adg-dns.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-category-httpdns-cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-category-httpdns-cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-category-ads-all","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-category-ads-all.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-googlefcm","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-googlefcm.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-onedrive","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-onedrive.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-gfw","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/gfw.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-geolocation-!cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-geolocation-!cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-category-games@cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-category-games@cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-steam@cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/steam@cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-microsoft@cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-microsoft@cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-apple@cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-apple@cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-apple-cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/apple-cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geosite-cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/sing-geosite/rule-set/geosite-cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geoip-telegram","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/geoip/release/srs/telegram.srs","download_detour":"direct","type":"remote"},
      {"tag":"geoip-cn","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/nekolsd/geoip/release/srs/cn.srs","download_detour":"direct","type":"remote"},
      {"tag":"geoip-private","format":"binary","url":"https://gh-proxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/private.srs","download_detour":"direct","type":"remote"},
      {"tag":"rule-custom-block","rules":[{"domain":["2fa.qwq2333.top","api.qwq2333.top"]}]}
    ]
  },
  "dns":{
    // "final":"local",
    // "final":"proxy",
    // "strategy":"prefer_ipv4",
    "reverse_mapping":true,
    "independent_cache":true,
    "rules":[
      {"rule_set":"rule-process","server":"local"},
      {"rule_set":"rule-geph-broker","server":"local"},
      {"clash_mode":"Direct","server":"local"},
      {"clash_mode":"Global","server":"proxy"},
      {"clash_mode":"fakeip","query_type":["A","AAAA"],"server":"fakeip"},
      {"rule_set":"geosite-private","server":"local"},
      {"type":"logical","mode":"and","rules":[{"type":"logical","mode":"and","rules":[{"clash_mode":"gfw","invert":true},{"clash_mode":"blacklist","invert":true}]},{"query_type":["SVCB","HTTPS"]}],"action":"reject"},
      {"rule_set":["geosite-ad-MeepoMaster","geosite-ad-cat","geosite-category-httpdns-cn","geosite-category-ads-all","rule-custom-block"],"action":"reject"},
      {"rule_set":"geosite-googlefcm","server":"googlefcm"},
      {"rule_set":"geosite-onedrive","server":"onedrive"},
      
      {"type":"logical","mode":"or","rules":[{"clash_mode":"gfw","rule_set":"geosite-gfw"},{"clash_mode":"blacklist","rule_set":"geosite-geolocation-!cn"}],"server":"local"},
      {"type":"logical","mode":"or","rules":[{"clash_mode":"gfw"},{"clash_mode":"blacklist"}],"server":"local"},

      {"rule_set":["geosite-category-games@cn","geosite-steam@cn","geosite-microsoft@cn","geosite-apple@cn","geosite-apple-cn"],"server":"local"},
      {"rule_set":"geosite-cn","server":"local"},
      {"type":"logical","mode":"and","rules":[{"query_type":"AAAA"},{"rule_set":"geosite-geolocation-!cn","invert":true},{"rule_set":"geoip-cn"}],"action":"reject"},
      {"type":"logical","mode":"and","rules":[{"clash_mode":"Rule"},{"rule_set":"geosite-geolocation-!cn","invert":true},{"rule_set":"geoip-cn"}],"client_subnet":"202.103.192.0/18","server":"proxy"},
      {"type":"logical","mode":"and","rules":[{"clash_mode":"Leak"},{"rule_set":"geosite-geolocation-!cn","invert":true},{"rule_set":"geoip-cn"}],"client_subnet":"202.103.192.0/18","server":"local"},
      
      {"domain":"end.end","action":"reject"}
    ],
    "servers":[
      {"tag":"proxy","server":"dns.cloudflare.com","domain_resolver":"hosts","detour":"proxy","type":"https"},
      {"tag":"googlefcm","server":"dns.alidns.com","domain_resolver":"hosts","detour":"googlefcm","type":"https"},
      {"tag":"onedrive","server":"dns.alidns.com","domain_resolver":"hosts","detour":"onedrive","type":"https"},
      {"tag":"direct","server":"dns.alidns.com","domain_resolver":"hosts","type":"https"},
      {"tag":"fakeip","inet4_range":"198.18.0.0/15","inet6_range":"fc00::/18","type":"fakeip"},
      // {"tag":"local","bind_interface":"pppoe-wan","type":"local"},
      // {"tag":"local","type":"dhcp"},
      {"tag":"local","type":"local"},
      {"tag":"hosts","predefined":{"dns.pub":["1.12.12.21","120.53.53.53"],"dns.alidns.com":["223.5.5.5","223.6.6.6"],"dns.google":["8.8.8.8","8.8.4.4"],"dns.cloudflare.com":["104.16.132.229","104.16.133.229"],"cloudflare-dns.com":["104.16.248.249","104.16.249.249"],"localhost":["127.0.0.1","::1"]},"type":"hosts"}
    ]
  },
  "outbounds":[
    {"tag":"proxy","outbounds":["urltest","urltest-vpn","urltest-airplane","9909","10010","10011","10012","10013","10014","10015","10016","10017","10018","10019"],"type":"selector"},
    {"tag":"urltest","outbounds":["urltest-vpn","urltest-airplane"],"interval":"10s","tolerance":100,"type":"urltest"},
    {"tag":"urltest-vpn","outbounds":["10010","10011","10012","10013","10014","9909"],"interval":"10s","tolerance":100,"type":"urltest"},
    {"tag":"urltest-airplane","outbounds":["10015"],"interval":"10s","tolerance":100,"type":"urltest"},
    {"tag":"googlefcm","type":"selector","outbounds":["direct","proxy"]},
    {"tag":"onedrive","type":"selector","outbounds":["direct","proxy"]},
    {"tag":"9909","type":"socks","server_port":9909,"server":"127.0.0.1","network":"tcp","version":"5"},{"tag":"10010","type":"socks","server_port":10010,"server":"127.0.0.1","network":"tcp","version":"5"},{"tag":"10011","type":"socks","server_port":10011,"server":"127.0.0.1","network":"tcp","version":"5"},
    {"tag":"10012","type":"socks","server_port":10012,"server":"127.0.0.1","version":"5"},{"tag":"10013","type":"socks","server_port":10013,"server":"127.0.0.1","version":"5"},{"tag":"10014","type":"socks","server_port":10014,"server":"127.0.0.1","version":"5"},
    {"tag":"10015","type":"socks","server_port":10015,"server":"127.0.0.1","version":"5"},{"tag":"10016","type":"socks","server_port":10016,"server":"127.0.0.1","version":"5"},{"tag":"10017","type":"socks","server_port":10017,"server":"127.0.0.1","version":"5"},{"tag":"10018","type":"socks","server_port":10018,"server":"127.0.0.1","version":"5"},{"tag":"10019","type":"socks","server_port":10019,"server":"127.0.0.1","version":"5"},
    {"tag":"direct","type":"direct"}
  ],
  "inbounds":[
    // {
    //   "tag":"tun",
    //   "address":["fd00::1/126","172.19.0.1/30"],
    //   "auto_route":true,
    //   // "auto_redirect":true,"include_uid":1000,
    //   // "strict_route":true,
    //   "exclude_interface":["tun-geph","pppoe-wan","tailscale0"],
    //   "route_exclude_address_set":["geoip-cn"],
    //   "interface_name":"sing-tun",
    //   // "platform":{"http_proxy":{"server":"127.0.0.1","server_port":10000,"enabled":true}},
    //   "stack":"system",
    //   "type":"tun"
    // },

    // {"tag":"direct","type":"direct","listen":"::","listen_port":10001},
    {"tag":"mixed","type":"mixed","listen":"::","listen_port":10000}
  ],
  "ntp":{
    "enabled":true,
    "server":"time.apple.com",
    "server_port":123
  },
  "log":{
    "timestamp":false,
    "level":"info"
  },
  "experimental":{
    "cache_file":{"path":"1.12.db","enabled":true},
    "clash_api":{"default_mode":"Rule","secret":"touhoured","external_controller":":10020"}
  }
}